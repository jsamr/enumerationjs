<a name="refactorvisitor"></a>
Move the logic, and pass the stateHandler instance to the enum constant handle function!